{% extends "base.html" %}

{% block title %}Game Store{% endblock %}

{% block content %}
  <div class="hero-banner">
    <div class="hero-content">
      <h1>Welcome to GameStore, {{ session.username }}!</h1>
      <p>Discover your next adventure. Browse our collection of exciting games.</p>
    </div>
  </div>

  <h2 class="text-center mt-5 mb-4 store-section-title">Featured Games</h2>

  <div class="row">
    {% if games %}
      {% for game in games %}
        <div class="col-md-4 mb-4 d-flex align-items-stretch"> {# Added d-flex and align-items-stretch for consistent card height #}
          <div class="game-card">
            <img src="{{ url_for('static', filename=game.image_url.replace('static/', '')) if game.image_url else 'https://via.placeholder.com/400x200.png?text=' + game.title|urlencode }}" class="card-img-top" alt="{{ game.title }}">
            <div class="card-body">
              <h3 class="card-title">{{ game.title }}</h3>
              <p class="card-text game-description">{{ game.description|truncate(100, True) }}</p> {# Truncate description #}
              <p class="game-price">${{ "%.2f"|format(game.price) }}</p>
              <p class="game-genre"><small>{{ game.genre }}</small></p>
              {# <p><small>Developer: {{ game.developer }} | Released: {{ game.release_date }}</small></p> #}
              <div class="card-footer-actions">
                <a href="{{ url_for('add_to_cart', game_id=game.id) }}" class="btn btn-sm btn-primary btn-add-to-cart">Add to Cart</a>
                <a href="{{ url_for('buy_now', game_id=game.id) }}" class="btn btn-sm btn-success btn-buy">Buy Now</a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p>No games available at the moment. Please check back later!</p>
    {% endif %}
  </div>
{% endblock %}
